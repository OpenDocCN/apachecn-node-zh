# 零、前言

在 Node.js 这样的平台上实现高性能意味着知道如何利用硬件的每一个方面，并帮助内存管理发挥最佳性能，正确决定如何构建复杂的应用。如果应用开始消耗大量内存，不要惊慌。相反，找出漏洞并迅速解决。更好的是，在它成为一个问题之前监控并停止它。

# 这本书涵盖了什么

[第一章](1.html "Chapter 1. Introduction and Composition")、*简介及构成*，介绍主题，强调业绩分析和对标的重要性。它是将应用分成几个更小的组件，将每个组件的复杂性降低到应用开发人员可以管理的水平。在这里，您理解了开发方法的重要性，以将复杂性分解成更小和可重用的模块，这些模块可以在应用的生命周期中更容易地与其他新的和更好的模块进行分析和交换。

[第 2 章](2.html "Chapter 2. Development Patterns")、*开发模式*，是关于帮助避免性能损失或帮助发现性能损失的好的编程模式。你会重视仔细选择简单的技术和模式的重要性，并避免未来的问题。考虑到这一点，您将更好地理解语言是如何工作的，了解事件循环的重要性，异步编程是如何最好地工作的，以及该语言的一些一流公民——流和缓冲区。

[第三章](3.html "Chapter 3. Garbage Collection")、*垃圾回收*，涵盖了 GC、其重要性以及其行为。在这里，您可以了解 V8 内存管理、死内存和内存泄漏。您还将学习如何对应用进行概要分析，并在开发人员没有正确传送对象的情况下发现由糟糕的编程导致的内存泄漏。

[第 4 章](4.html "Chapter 4. CPU Profiling")、 *CPU 分析*，是关于分析处理器和理解应用何时以及为何占用主机。在本章中，您将了解该语言的局限性以及如何开发应用，这些应用可以分为几个组件在不同的主机上运行，从而获得更好的性能和可扩展性。

[第 5 章](5.html "Chapter 5. Data and Cache")、*数据和缓存*，解释了外部存储的应用数据及其如何影响应用的性能。它是关于本地存储在应用、磁盘、本地服务、本地网络服务甚至客户端主机中的数据。在本章中，您将了解到不同类型的数据存储方法有不同的惩罚，在选择最佳方法时必须考虑这些因素。您了解到，数据可以本地或远程存储，对数据的访问有时可以(也应该)缓存，这取决于数据的重要性。

[第 6 章](6.html "Chapter 6. Test, Benchmark, and Analyze")、*测试、基准和分析*，是关于测试和基准应用的。这也是为了加强代码覆盖率，以避免未知的应用测试区域。然后我们介绍基准和基准分析。您将了解好的测试如何精确定位应用的特定部分的基准和分析，从而提高性能。

[第 7 章](7.html "Chapter 7. Bottlenecks")、*瓶颈*，涵盖了应用之外的限制。本章讲述的是当您意识到性能限制不是因为应用编程而是外部因素(如主机硬件、网络或客户端)时的情况。您将意识到外部组件对应用的限制，无论是本地的还是远程的。此外，本章解释说，有时，限制在客户端，无法改善当前的性能。

# 这本书你需要什么

唯一需要的软件是 Node.js。有些模块可能需要编译，所以 Linux 或 OS X 操作系统更容易测试示例。不需要特定的硬件。

# 这本书是给谁的

这本书是为那些有基本 Node.js 背景的人和那些需要更深入了解这个平台的人准备的。也许，你对这种语言感到很舒服，也许你知道它有一个垃圾收集器，但你永远不会真正理解它是如何工作的，它是如何失败的，这取决于你使用这种语言的方式。需要基本的语言理解和扎实的经验。

# 惯例

在这本书里，你会发现许多区分不同种类信息的文本样式。以下是这些风格的一些例子和对它们的意义的解释。

文本中的码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、伪 URL、用户输入和 Twitter 句柄如下所示:“我们可以通过使用`include`指令来包含其他上下文。”

代码块设置如下:

```js
    async.each(users, function (user, next) {
        // do something on each user object
        return next();
    }, function (err) {
        // done!
    });
```

任何命令行输入或输出都编写如下:

```js
$ node --debug leaky.js
Debugger listening on port 5858
mem. nodes: 37293
mem. nodes: 37645
mem. nodes: 37951
mem. nodes: 37991
mem. nodes: 38004

```

**新名词**和**重要词语**以粗体显示。你在屏幕上看到的单词，例如菜单或对话框中的单词，会出现在这样的文本中:“现在，不用选择**拍摄快照**，只需点击**加载**按钮，从您的磁盘中选择快照。”

### 注

警告或重要提示会出现在这样的框中。

### 类型

提示和技巧是这样出现的。

# 读者反馈

我们随时欢迎读者的反馈。让我们知道你对这本书的看法——你喜欢或不喜欢什么。读者反馈对我们来说很重要，因为它有助于我们开发出你真正能从中获益的标题。

要给我们发送一般反馈，只需发送电子邮件`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在您的邮件主题中提及书名。

如果你对某个主题有专业知识，并且对写作或投稿感兴趣，请参见我们位于[www.packtpub.com/authors](http://www.packtpub.com/authors)的作者指南。

# 客户支持

现在，您已经自豪地拥有了一本书，我们有许多东西可以帮助您从购买中获得最大收益。

## 下载示例代码

您可以从您在[http://www.packtpub.com](http://www.packtpub.com)的账户下载您购买的所有 Packt Publishing 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 下载本书的彩色图片

我们还为您提供了一个 PDF 文件，其中包含本书中使用的截图/图表的彩色图像。彩色图像将帮助您更好地理解输出中的变化。您可以从[https://www . packtpub . com/sites/default/files/downloads/6148 OS . pdf](https://www.packtpub.com/sites/default/files/downloads/6148OS.pdf)下载此文件。

## 勘误表

尽管我们尽了最大努力来确保我们内容的准确性，但错误还是会发生。如果你在我们的某本书里发现了错误——可能是文本或代码中的错误——如果你能向我们报告，我们将不胜感激。通过这样做，你可以让其他读者免受挫折，并帮助我们改进这本书的后续版本。如果您发现任何勘误表，请访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误表提交表**链接，并输入您的勘误表的详细信息。一旦您的勘误表得到验证，您的提交将被接受，勘误表将上传到我们的网站或添加到该标题勘误表部分下的任何现有勘误表列表中。

要查看之前提交的勘误表，请前往[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)并在搜索栏中输入图书名称。所需信息将出现在**勘误表**部分。

## 盗版

互联网上版权材料的盗版是所有媒体的一个持续问题。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上遇到任何形式的我们作品的非法拷贝，请立即向我们提供位置地址或网站名称，以便我们寻求补救。

请通过`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`联系我们，获取疑似盗版资料的链接。

我们感谢您在保护我们的作者方面的帮助，以及我们为您带来有价值内容的能力。

## 问题

如果您对本书的任何方面有问题，可以在`<[questions@packtpub.com](mailto:questions@packtpub.com)>`联系我们，我们将尽最大努力解决问题。