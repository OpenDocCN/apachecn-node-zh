# 十一、我们将学习的内容——在线论坛应用

无论我们学习多少本书，作为开发人员，如果不构建一个实际的应用来使用某个技术堆栈，我们就无法真正学会如何编程。在本章中，我们将了解我们打算构建的应用。我们将了解如何应用我们所涵盖的一些主题。我们将看到我们的应用将具有哪些功能，以及包含这些功能的一些基本原理。作者在构建论坛风格的应用方面也有相当多的经验，比如我最新的应用 DzHaven。所以，您可以放心，您将学到的是实际应用中使用的生产级代码。

在本章中，我们将介绍以下主要主题：

*   分析我们将构建什么——论坛应用
*   论坛认证分析
*   分析线程管理
*   分析线程点系统

# 分析我们将构建什么——论坛应用

如前所述，我们正在构建一个论坛应用。它在风格上与其他论坛应用（如 StackOverflow 和 Bitcointalk.org）有些相似。用户将能够发布主题或提出问题，并从应用社区中的其他用户处接收响应。

**为什么要构建单个论坛应用？**

我们可以通过构建几个更小更简单的应用来演示 JavaScript 开发。用简单的应用演示全堆栈编程的问题在于，它们没有显示现代 JavaScript 应用的所有功能。换句话说，它可能会在您如何实现某些功能（如身份验证或数据库访问）的知识上留下漏洞。

当然，我们可以构建一个图形化的照片或视频应用，但这些应用的问题是需要对图形设计和美学进行大量关注。此外，编辑照片或视频也不错，但这些技能不能很好地转化为一般的全堆栈编程。像这样的应用没有错，但在这本书中，主要目标显然是学习如何编写一个完整的堆栈应用，而不一定成为一名图形专家。

因此，一个论坛应用将使我们对大型全堆栈应用所需的无数框架有一个很好的理解。它还将展示我们需要在一个应用中实现的功能，该应用将在一个可公开访问的网站上为许多用户提供服务。在高层，我们将实施以下技术功能：

*   **Security**

    广义地说，web 安全包括两个主要部分。身份验证是服务器的能力，用于验证用户是否是他们所说的用户，授权是控制用户访问应用功能的能力。

*   **Sessions and cookies**

    服务器端会话允许服务器在站点上维护有关用户当前活动的数据。我们将使用会话和 cookie 来识别用户，并在用户使用网站时提供更轻松的体验。

*   **Object Relational Mapper**

    **对象关系映射器**（**ORM**是技术，它允许代码（在我们的例子中是 TypeScript）用于与数据库交互，而不是 SQL。

*   **Database access and repository layer**

    数据库访问是复杂的，因此我们将使用名为 Repository 的设计模式将数据库访问代码与其他应用代码分开。

现在，应用需要在默认情况下启用移动功能。我们需要确保手机用户能够访问并参与我们的应用社区。因此，我们将使用响应性方法构建我们的应用，以便我们的应用能够在台式机和移动设备上工作。响应性 web 设计仅仅意味着我们的应用的屏幕将发生变化，以最适合设备的屏幕大小和尺寸。我们将使用现代 CSS 和 JavaScript 技术来实现这一点。

在本节中，我们回顾了我们将构建的应用类型以及选择的原因。在下一节中，我们将介绍论坛身份验证及其一些 f 功能。

# 解析论坛认证

在任何大型多用户应用中，我们都需要使用系统来识别和授权用户。我们的论坛应用也不例外。

用户将能够发布论坛主题和回答论坛问题。因此，他们需要能够将自己的活动与其他用户的活动区分开来。因此，我们将构建一个登录系统，允许用户使用自己的唯一帐户在站点上进行身份验证和执行活动。因此，我们将构建以下功能：

*   **Login and logout**

    此功能不仅包括允许登录和注销的**GraphQL**解析器，还包括允许用户输入其 ID 和密码的屏幕。我们还将使用多种技术为用户在任何给定时间的活动提供唯一的会话状态。

*   **Registration system**

    注册系统将包括屏幕和解析程序，允许用户创建一个独特的帐户，以区分他们在网站上的活动。

*   **Password reset**

    用户在需要时以安全的方式更改密码的能力。

*   **Profile screen**

    显示用户帐户信息的屏幕和功能。此信息将包括他们的电子邮件和用户 ID。除此之外，它还允许用户查看他们以前的所有帖子，包括主题帖子和回复。

*   **Categories**

    应创建基于类别的分组，以允许用户仅查看他们感兴趣的类别中的帖子，并减少噪音。

*   **Notification emails**

    一种通过电子邮件联系用户并通知他们有关网站的其他要求或新闻的系统。例如，这可能包括一封验证电子邮件，用于检查他们注册的电子邮件是否有效，是否可供同一用户访问。

在本节中，我们回顾了我们将要构建的功能列表，这些功能允许用户对自己及其在站点上的活动进行身份验证和唯一标识。在下一节中，我们将回顾如何实现**线程**，这是应用中的主要通信方式。

# 分析线程管理

网站上的每一个帖子都可以看作是一条线索的开始；也就是说，最初的帖子启动了关于某个主题的讨论，并创建了一系列响应。因此，我们的应用需要能够允许用户通过添加初始线程帖子来开始讨论。然后，所有用户都可以看到这篇文章，他们可以对此作出回应。每个线程项，包括初始帖子，都将被发布帖子的用户唯一标识。因此，为了创建此功能，我们需要以下功能：

*   **Topic thread posting and editing**

    当然，这一功能将包括任何人都可以查看的功能，以及作者添加和编辑主题帖子的功能。用户还可以从**用户档案**屏幕上看到他们的所有帖子。

*   **Responding to a thread topic**

    此功能将包括主题起始用户和其他用户能够用自己的评论回复主题帖子。它能够在一个屏幕上查看主题帖子和与该主题相关的所有回复。

    为了将应用的复杂性降至最低，将不允许用户响应特定的响应，而只响应主要主题。不过，他们可以在回复中引用其他帖子。

在本节中，我们回顾了应用主要功能的特性。创建和响应新线程将是应用的核心功能，尽管我们将添加其他相关功能以增强其功能。在下一节中，我们将回顾我们将为 thread points 系统构建的内容。

# 螺纹点系统分析

用户应该能够标记他们喜欢的评论并对其进行投票。显示哪些帖子受欢迎也有助于用户更多地参与交流。在本节中，我们将回顾如何使用户表示他们对帖子的批准。

要启用此功能，我们将在应用中包括以下功能：

*   **Points system**

    将创建一个积分系统，允许用户对帖子和回复进行上下投票。

*   **Display view count**

    显示用户查看帖子的次数。

*   **Display response count**

    显示一篇帖子的回复数量，让用户知道哪些话题是热门话题或趋势。

在本节中，我们回顾了该系统在使用户能够表明他们对某些帖子的感受和查看主题流行度方面的重要性。积分系统将增强用户参与度和活动性。

# 总结

在本章中，我们介绍了我们将要构建的应用，它将具有的功能列表，以及使用此类应用的一些原因。因为我们正在构建一个完整的堆栈应用，所以我们将要构建的代码将非常复杂和具有挑战性。你甚至可能会对这款应用的终极尺寸和范围感到惊讶。然而，一旦我们完成了，我们将构建一个现代的、复杂的、完整的端到端应用。

在下一章中，我们将开始编写应用的 React 客户端部分。我们无法完全完成它，因为我们还没有启动后端。但是，我们将构建其中很大一部分，您将能够看到许多屏幕。